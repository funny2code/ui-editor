{"version":3,"sources":["webpack://grapesjs-project-manager/webpack/universalModuleDefinition","webpack://grapesjs-project-manager/webpack/bootstrap","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/regenerator/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/asyncToGenerator/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/assertThisInitialized/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/defineProperty/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/getPrototypeOf/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/classCallCheck/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/createClass/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/inherits/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/possibleConstructorReturn/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/objectWithoutProperties/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/readOnlyError/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/toConsumableArray/index.js","webpack://grapesjs-project-manager/./node_modules/dom-to-image/src/dom-to-image.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/arrayLikeToArray/index.js","webpack://grapesjs-project-manager/./node_modules/regenerator-runtime/runtime.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/setPrototypeOf/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/typeof/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/arrayWithoutHoles/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/iterableToArray/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/nonIterableSpread/index.js","webpack://grapesjs-project-manager/./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose/index.js","webpack://grapesjs-project-manager/./src/utils/timeago.js","webpack://grapesjs-project-manager/./src/utils/ui.js","webpack://grapesjs-project-manager/./src/utils/objsize.js","webpack://grapesjs-project-manager/./src/utils/sort.js","webpack://grapesjs-project-manager/./src/manager/templates.js","webpack://grapesjs-project-manager/./src/manager/pages.js","webpack://grapesjs-project-manager/./src/manager/settings.js","webpack://grapesjs-project-manager/./src/manager/index.js","webpack://grapesjs-project-manager/./src/commands.js","webpack://grapesjs-project-manager/./src/consts.js","webpack://grapesjs-project-manager/./src/storage/indexeddb.js","webpack://grapesjs-project-manager/./src/storage/remote.js","webpack://grapesjs-project-manager/./src/storage/firestore.js","webpack://grapesjs-project-manager/./src/storage/index.js","webpack://grapesjs-project-manager/./src/locale/en.js","webpack://grapesjs-project-manager/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","ReferenceError","obj","configurable","writable","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","protoProps","staticProps","subClass","superClass","constructor","_typeof","assertThisInitialized","objectWithoutPropertiesLoose","source","excluded","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","arr","global","util","escape","string","replace","parseExtension","mimeType","url","extension","toLowerCase","WOFF","JPEG","dataAsUrl","content","type","isDataUrl","search","canvasToBlob","canvas","toBlob","binaryString","atob","toDataURL","split","binaryArray","Uint8Array","charCodeAt","Blob","resolveUrl","baseUrl","doc","document","implementation","createHTMLDocument","base","createElement","head","appendChild","a","body","href","getAndEncode","TIMEOUT","domtoimage","impl","options","cacheBust","test","Date","getTime","placeholder","request","XMLHttpRequest","onreadystatechange","readyState","status","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","ontimeout","responseType","timeout","open","send","imagePlaceholder","message","console","uid","index","Math","random","pow","toString","slice","delay","ms","setTimeout","asArray","arrayLike","array","push","escapeXhtml","makeImage","uri","image","Image","onload","onerror","src","width","node","leftBorder","px","rightBorder","scrollWidth","height","topBorder","bottomBorder","scrollHeight","match","exec","styleProperty","getComputedStyle","getPropertyValue","parseFloat","newUtil","inliner","URL_REGEX","inlineAll","shouldProcess","nothingToInline","readUrls","urls","forEach","inline","filter","data","dataUrl","RegExp","urlAsRegex","newInliner","fontFaces","resolveAll","readAll","webFonts","all","map","webFont","cssStrings","join","styleSheets","cssRules","sheet","e","log","rule","CSSRule","FONT_FACE_RULE","style","rules","newWebFont","webFontRule","parentStyleSheet","cssText","newFontFaces","images","Element","background","inlined","setProperty","getPropertyPriority","inlineBackground","HTMLImageElement","newImage","childNodes","child","element","newImages","defaultOptions","toSvg","toPng","draw","toJpeg","quality","toPixelData","getContext","getImageData","copyOptions","cloneNode","HTMLCanvasElement","clone","cloneChildren","original","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyProperties","className","styleElement","selector","formatCssText","formatCssProperties","createTextNode","formatPseudoElementStyle","clonePseudoElement","HTMLTextAreaElement","innerHTML","HTMLInputElement","setAttribute","SVGElement","SVGRectElement","attribute","getAttribute","processClone","children","cloneChildrenInOrder","parent","childClone","embedFonts","inlineImages","bgcolor","backgroundColor","keys","XMLSerializer","serializeToString","xhtml","foreignObject","svg","makeSvgDataUri","domNode","ctx","fillStyle","fillRect","newCanvas","drawImage","styleNode","len","arr2","Array","runtime","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","GenStateSuspendedStart","method","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","_setPrototypeOf","arrayLikeToArray","isArray","from","minLen","sourceKeys","timeago","date","short","ii","second","minute","hour","day","week","month","year","round","dir","pl","v","substring","ts","now","UI","editor","opts","$","pfx","getConfig","setState","setStateSilent","onRender","handleTabs","update","Storage","getCurrentStorage","Pages","objSizeKiloBytes","objSizeBytes","TextEncoder","encode","JSON","stringify","matchText","text","TemplateManager","handleSort","handleFilterInput","handleNameInput","handleOpen","handleCreate","handleDelete","openEdit","editableProjectId","projectId","tab","sites","nameText","filterText","loading","sortBy","sortOrder","objSize","cs","loadAll","trim","dataset","sort","$el","find","removeClass","addClass","id","currentId","currentPageOpen","setId","load","res","setName","setThumbnail","thumbnail","setIsTemplate","template","setDescription","description","Modal","close","runCommand","styles","pages","crypto","randomUUID","def","store","currentTarget","SettingsApp","setTab","updated_at","onUpdateAsync","confirmDeleteProject","toDel","delete","onDeleteAsync","onDelete","order","loader","nosites","b","sortByName","dateType","timeA","timeB","sortByDate","pagesA","parse","pagesB","sortByPages","sizeA","sizeB","sortBySize","matchingSites","site","created_at","size","_pages","legacyPrefix","time","ago","createdAt","pageNames","page","I18n","toFixed","html","css","renderSiteList","renderSiteActions","on","val","remove","cont","PagesApp","addPage","selectPage","removePage","isSelected","editablePageId","isShowing","pm","getAll","getSelected","select","currentPage","set","add","component","renderPagesList","Panels","getPanel","findPanel","render","trigger","handleSave","handleThumbnail","handleThumbnailInput","renderSettings","editableId","editPage","checked","handleEdit","clb","attr","onThumbnail","allSites","cm","Commands","mdl","mdlClass","mdlClassMd","run","sender","mdlDialog","querySelector","classList","setTitle","mdlTitle","setContent","getModel","once","showPanel","hidePanel","uuidv4","getRandomValues","getJpeg","clbErr","onScreenshotAsync","el","getWrapper","getEl","getStyle","onScreenshotError","storageIDB","storageRemote","storageFireStore","helpers","currentName","currentThumbnail","isTemplate","db","sm","StorageManager","storageName","objsName","objectStoreName","getDb","getAsyncDb","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","dbName","indexeddbVersion","onsuccess","onupgradeneeded","createObjectStore","keyPath","createIndex","unique","getObjectStore","transaction","objectStore","getAsyncObjectStore","objs","put","_data","remote","stOpts","getStorageOptions","urlLoad","endsWith","projectData","urlStore","uuidInPath","urlDelete","collection","apiKey","authDomain","dbSettings","settings","onError","code","getDoc","getAsyncCollection","firebase","apps","app","firestore","initializeApp","firebaseConfig","enableOffline","enablePersistence","catch","getAsyncDoc","cll","setDocId","_doc","exists","docs","merge","indexeddb","templates","new","help","updated","created","actions","titles","edit","save","generate","labels","placeholders","loadFirst","customLoad","confirm","confirmDeletePage","del","up","shot","$input","nopages","timestampsInSnapshots","i18n","addMessages","en","commands","storage","firstPage","stopCommand","substr"],"mappings":"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","file":"grapesjs-project-manager.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-project-manager\"] = factory();\n\telse\n\t\troot[\"grapesjs-project-manager\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var setPrototypeOf = require(\"@babel/runtime/helpers/setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var _typeof = require(\"@babel/runtime/helpers/typeof\")[\"default\"];\n\nvar assertThisInitialized = require(\"@babel/runtime/helpers/assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var objectWithoutPropertiesLoose = require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _readOnlyError(name) {\n  throw new TypeError(\"\\\"\" + name + \"\\\" is read-only\");\n}\n\nmodule.exports = _readOnlyError;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayWithoutHoles = require(\"@babel/runtime/helpers/arrayWithoutHoles\");\n\nvar iterableToArray = require(\"@babel/runtime/helpers/iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"@babel/runtime/helpers/unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"@babel/runtime/helpers/nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","(function (global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof module !== 'undefined')\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n                defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n            .then(function (node) {\n                return cloneNode(node, options.filter, true);\n            })\n            .then(embedFonts)\n            .then(inlineImages)\n            .then(applyOptions)\n            .then(function (clone) {\n                return makeSvgDataUri(clone,\n                    options.width || util.width(node),\n                    options.height || util.height(node)\n                );\n            });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function (property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.getContext('2d').getImageData(\n                    0,\n                    0,\n                    util.width(node),\n                    util.height(node)\n                ).data;\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.toDataURL();\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n            .then(function (canvas) {\n                return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n            .then(util.canvasToBlob);\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if(typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if(typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n            .then(util.makeImage)\n            .then(util.delay(100))\n            .then(function (image) {\n                var canvas = newCanvas(domNode);\n                canvas.getContext('2d').drawImage(image, 0, 0);\n                return canvas;\n            });\n\n        function newCanvas(domNode) {\n            var canvas = document.createElement('canvas');\n            canvas.width = options.width || util.width(domNode);\n            canvas.height = options.height || util.height(domNode);\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n            .then(makeNodeCopy)\n            .then(function (clone) {\n                return cloneChildren(node, clone, filter);\n            })\n            .then(function (clone) {\n                return processClone(node, clone);\n            });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function (child) {\n                    done = done\n                        .then(function () {\n                            return cloneNode(child, filter);\n                        })\n                        .then(function (childClone) {\n                            if (childClone) parent.appendChild(childClone);\n                        });\n                });\n                return done;\n            }\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n                .then(cloneStyle)\n                .then(clonePseudoElements)\n                .then(copyUserInput)\n                .then(fixSvg)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                function copyStyle(source, target) {\n                    if (source.cssText) target.cssText = source.cssText;\n                    else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function (name) {\n                            target.setProperty(\n                                name,\n                                source.getPropertyValue(name),\n                                source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function (element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    clone.className = clone.className + ' ' + className;\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                                .map(formatProperty)\n                                .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                    style.getPropertyValue(name) +\n                                    (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function (attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n            .then(function (cssText) {\n                var styleNode = document.createElement('style');\n                node.appendChild(styleNode);\n                styleNode.appendChild(document.createTextNode(cssText));\n                return node;\n            });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n            .then(function () {\n                return node;\n            });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n            .then(function (node) {\n                node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n                return new XMLSerializer().serializeToString(node);\n            })\n            .then(util.escapeXhtml)\n            .then(function (xhtml) {\n                return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n            })\n            .then(function (foreignObject) {\n                return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n                    foreignObject + '</svg>';\n            })\n            .then(function (svg) {\n                return 'data:image/svg+xml;charset=utf-8,' + svg;\n            });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function (resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function (resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function () {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            return new Promise(function (resolve, reject) {\n                var image = new Image();\n                image.onload = function () {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if(domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function (resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if(domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if(split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if(placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function () {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if(placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function delay(ms) {\n            return function (arg) {\n                return new Promise(function (resolve) {\n                    setTimeout(function () {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            var array = [];\n            var length = arrayLike.length;\n            for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function (url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n                .then(function (url) {\n                    return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n                })\n                .then(get || util.getAndEncode)\n                .then(function (data) {\n                    return util.dataAsUrl(data, util.mimeType(url));\n                })\n                .then(function (dataUrl) {\n                    return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n                });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n                .then(readUrls)\n                .then(function (urls) {\n                    var done = Promise.resolve(string);\n                    urls.forEach(function (url) {\n                        done = done.then(function (string) {\n                            return inline(string, url, baseUrl, get);\n                        });\n                    });\n                    return done;\n                });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n                .then(function (webFonts) {\n                    return Promise.all(\n                        webFonts.map(function (webFont) {\n                            return webFont.resolve();\n                        })\n                    );\n                })\n                .then(function (cssStrings) {\n                    return cssStrings.join('\\n');\n                });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n                .then(getCssRules)\n                .then(selectWebFontRules)\n                .then(function (rules) {\n                    return rules.map(newWebFont);\n                });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                    .filter(function (rule) {\n                        return rule.type === CSSRule.FONT_FACE_RULE;\n                    })\n                    .filter(function (rule) {\n                        return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                    });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function (sheet) {\n                    try {\n                        util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                    } catch (e) {\n                        console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function () {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                    .then(get || util.getAndEncode)\n                    .then(function (data) {\n                        return util.dataAsUrl(data, util.mimeType(element.src));\n                    })\n                    .then(function (dataUrl) {\n                        return new Promise(function (resolve, reject) {\n                            element.onload = resolve;\n                            element.onerror = reject;\n                            element.src = dataUrl;\n                        });\n                    });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n                .then(function () {\n                    if (node instanceof HTMLImageElement)\n                        return newImage(node).inline();\n                    else\n                        return Promise.all(\n                            util.asArray(node.childNodes).map(function (child) {\n                                return inlineAll(child);\n                            })\n                        );\n                });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                    .then(function (inlined) {\n                        node.style.setProperty(\n                            'background',\n                            inlined,\n                            node.style.getPropertyPriority('background')\n                        );\n                    })\n                    .then(function () {\n                        return node;\n                    });\n            }\n        }\n    }\n})(this);\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"@babel/runtime/helpers/arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"@babel/runtime/helpers/arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","export default function timeago(date, short) {\n    const obj = {\n        second: 1000,\n        minute: 60 * 1000,\n        hour: 60 * 1000 * 60,\n        day: 24 * 60 * 1000 * 60,\n        week: 7 * 24 * 60 * 1000 * 60,\n        month: 30 * 24 * 60 * 1000 * 60,\n        year: 365 * 24 * 60 * 1000 * 60,\n    }\n\n    const { round } = Math,\n        dir = ' ago',\n        pl = function (v, n) {\n            return (short === undefined) ? `${n} ${v + (n > 1 ? 's' : '') + dir}` : n + v.substring(0, 1)\n        },\n        ts = Date.now() - new Date(date).getTime();\n    let ii;\n\n    if (ts < 0) {\n        ts *= -1;\n        dir = ' from now';\n    }\n\n    for (var i in obj) {\n        if (round(ts) < obj[i]) return pl(ii || 'm', round(ts / (obj[ii] || 1)))\n        ii = i;\n    }\n    return pl(i, round(ts / obj[i]));\n}","export default class UI {\n    constructor(editor, opts = {}) {\n        this.editor = editor;\n        this.$ = editor.$;\n        this.pfx = editor.getConfig('stylePrefix');\n        this.opts = opts;\n        this.setState = this.setState.bind(this);\n        this.setStateSilent = this.setStateSilent.bind(this);\n        this.onRender = this.onRender.bind(this);\n        this.handleTabs = this.handleTabs.bind(this);\n    }\n\n    setState(state) {\n        this.state = { ...this.state, ...state };\n        this.update();\n    }\n\n    setStateSilent(state) {\n        this.state = { ...this.state, ...state };\n    }\n\n    get sm() {\n        return this.editor.Storage;\n    }\n\n    get cs() {\n        return this.editor.Storage.getCurrentStorage();\n    }\n\n    get pm() {\n        return this.editor.Pages;\n    }\n\n    onRender() { }\n\n    handleTabs() { }\n}","export function objSizeMegaBytes(obj) {\n    return objSizeBytes(obj) / (1024 * 1024);\n}\n\nexport default function objSizeKiloBytes(obj) {\n    return objSizeBytes(obj) / 1024;\n}\n\nexport function objSizeBytes(obj) {\n    return new TextEncoder().encode(JSON.stringify(obj)).length;\n}","// https://github.com/netlify-labs/oauth-example/blob/master/src/utils/sort.js\n// License MIT\nimport objSize from './objsize';\n\nexport function matchText(search, text) {\n    if (!text || !search) {\n        return false\n    }\n    return text.toLowerCase().indexOf(search.toLowerCase()) > -1\n}\n\nexport function sortByDate(dateType, order) {\n    return function (a, b) {\n        const timeA = new Date(a[dateType]).getTime()\n        const timeB = new Date(b[dateType]).getTime()\n        if (order === 'asc') {\n            return timeA - timeB\n        }\n        // default 'desc' descending order\n        return timeB - timeA\n    }\n}\n\nexport function sortByName(key, order) {\n    return function (a, b) {\n        if (order === 'asc') {\n            if (a[key] < b[key]) return -1\n            if (a[key] > b[key]) return 1\n        }\n        if (a[key] > b[key]) return -1\n        if (a[key] < b[key]) return 1\n        return 0\n    }\n}\n\nexport function sortByPages(key, order) {\n    return function (a, b) {\n        const pagesA = JSON.parse(a[key]);\n        const pagesB = JSON.parse(b[key]);\n        if (order === 'desc') {\n            if (pagesA.length < pagesB.length) return -1\n            if (pagesA.length > pagesB.length) return 1\n        }\n        if (pagesA.length > pagesB.length) return -1\n        if (pagesA.length < pagesB.length) return 1\n        return 0\n    }\n}\n\nexport function sortBySize(order) {\n    return function (a, b) {\n        const sizeA = objSize(a);\n        const sizeB = objSize(b);\n        if (order === 'asc') {\n            if (sizeA < sizeB) return -1\n            if (sizeA > sizeB) return 1\n        }\n        if (sizeA > sizeB) return -1\n        if (sizeA < sizeB) return 1\n        return 0\n    }\n}","import ago from '../utils/timeago';\nimport UI from '../utils/ui';\nimport objSize from '../utils/objsize';\nimport { sortByDate, sortByName, sortByPages, sortBySize, matchText } from '../utils/sort';\n\nexport default class TemplateManager extends UI {\n    constructor(editor, opts = {}) {\n        super(editor, opts);\n        this.handleSort = this.handleSort.bind(this);\n        this.handleFilterInput = this.handleFilterInput.bind(this);\n        this.handleNameInput = this.handleNameInput.bind(this);\n        this.handleOpen = this.handleOpen.bind(this);\n        this.handleCreate = this.handleCreate.bind(this);\n        this.handleDelete = this.handleDelete.bind(this);\n        this.openEdit = this.openEdit.bind(this);\n\n        /* Set initial app state */\n        this.state = {\n            editableProjectId: '',\n            projectId: '',\n            tab: 'pages',\n            sites: [],\n            nameText: '',\n            filterText: '',\n            loading: false,\n            sortBy: 'published_at',\n            sortOrder: 'desc'\n        };\n    }\n\n    get editableId() {\n        return this.state.editableProjectId;\n    }\n\n    get allSites() {\n        return this.state.sites;\n    }\n\n    get allSitesSize() {\n        return objSize(this.state.sites);\n    }\n\n    async onRender() {\n        const { setState, cs } = this;\n\n        /* Set request loading state */\n        setState({\n            loading: true\n        });\n\n        /* Fetch sites from storage API */\n        const sites = await cs.loadAll();\n        /* Set sites and turn off loading state */\n        setState({\n            sites,\n            loading: false\n        });\n    }\n\n    handleFilterInput(e) {\n        this.setState({\n            filterText: e.target.value.trim()\n        });\n    }\n\n    handleNameInput(e) {\n        this.setStateSilent({\n            nameText: e.target.value.trim()\n        })\n    }\n\n    handleSort(e) {\n        const { sortOrder } = this.state;\n        if (e.target && e.target.dataset) {\n            this.setState({\n                sortBy: e.target.dataset.sort,\n                // invert sort order\n                sortOrder: sortOrder === 'desc' ? 'asc' : 'desc'\n            });\n        }\n    }\n\n    handleTabs(e) {\n        const { target } = e;\n        const { $el, pfx, $ } = this;\n        $el.find(`.${pfx}tablinks`).removeClass('active');\n        $(target).addClass('active');\n        if (target.id === 'pages') {\n            this.setState({ tab: 'pages' });\n        } else {\n            this.setState({ tab: 'templates' });\n        }\n    }\n\n    async handleOpen(e) {\n        const { editor, cs } = this;\n        const { projectId } = this.state;\n        if (!projectId || projectId === cs.currentId) {\n            this.opts.currentPageOpen()\n            return;\n        }\n        cs.setId(projectId);\n        const res = await editor.load();\n        cs.setName(res.name);\n        cs.setThumbnail(res.thumbnail || '');\n        cs.setIsTemplate(res.template);\n        cs.setDescription(res.description || 'No description');\n        editor.Modal.close();\n    }\n\n    async handleCreate(e) {\n        const { editor, cs } = this;\n        const { projectId, nameText } = this.state;\n        const id = editor.runCommand('get-uuidv4');\n        const name = nameText || 'New-' + id.substring(0, 8);\n        const def = {\n            id,\n            name,\n            template: false,\n            thumbnail: '',\n            styles: '[]',\n            description: 'No description',\n            pages: `[{\"id\": \"${crypto.randomUUID().substring(0, 13)}\", \"name\": \"index\"}]`,\n            styles: '[]',\n            assets: '[]'\n        };\n        if (!projectId) {\n            cs.setId(id);\n            await cs.store(def);\n            cs.setIsTemplate(false);\n            const res = await editor.load();\n            cs.setId(res.id);\n            cs.setName(res.name);\n            cs.setThumbnail(res.thumbnail || '');\n            cs.setDescription(res.description || 'No description');\n            editor.Modal.close();\n        } else {\n            cs.setId(projectId);\n            cs.setIsTemplate(false);\n            const res = await editor.load();\n            cs.setId(id);\n            cs.setName(name);\n            cs.setThumbnail(res.thumbnail || '');\n            cs.setDescription(res.description || 'No description');\n            editor.Modal.close();\n        }\n    }\n\n    openEdit(e) {\n        const { editor, setStateSilent } = this;\n        setStateSilent({\n            editableProjectId: e.currentTarget.dataset.id\n        });\n        editor.Modal.close();\n        editor.SettingsApp.setTab('project');\n        editor.runCommand('open-settings');\n    }\n\n    handleEdit(data) {\n        const { opts, cs, editor } = this;\n        if (typeof opts.update === 'function') {\n            opts.update({ ...data, updated_at: Date.now() }, editor);\n        } else {\n            opts.onUpdateAsync(cs.update({ ...data, updated_at: Date.now() }));\n        }\n    }\n\n    async handleDelete(e) {\n        const { cs, setState, opts } = this;\n        if (opts.confirmDeleteProject()) {\n            const toDel = e.currentTarget.dataset.id;\n            if (typeof opts.delete === 'function') {\n                opts.delete(toDel)\n            } else {\n                const res = await opts.onDeleteAsync(cs.delete(toDel));\n                opts.onDelete(res);\n            }\n            const sites = await cs.loadAll();\n            setState({ sites });\n        }\n    }\n\n    renderSiteList() {\n        const { sites, tab, filterText, loading, sortBy, sortOrder } = this.state;\n        const { pfx, opts, cs, editor } = this;\n\n        if (loading) return opts.loader || '<div>Loading sites...</div>';\n\n        if (!sites.length) return opts.nosites || '<div>No Sites</div>';\n\n        let order\n        if (sortBy === 'id') {\n            order = sortByName(sortBy, sortOrder);\n        } else if (sortBy === 'updated_at' || sortBy === 'created_at') {\n            order = sortByDate(sortBy, sortOrder);\n        } else if (sortBy === 'pages') {\n            order = sortByPages(sortBy, sortOrder);\n        } else if (sortBy === 'size') {\n            order = sortBySize(sortOrder);\n        }\n\n        const sortedSites = sites.sort(order);\n\n        let matchingSites = sortedSites.filter(site => {\n            // No search query. Show all\n            if (!filterText && tab === 'pages') {\n                return true;\n            }\n\n            const { id, name, template } = site;\n            if (\n                (matchText(filterText, id) ||\n                    matchText(filterText, name)) &&\n                tab === 'pages'\n            ) {\n                return true;\n            }\n\n            if (tab === 'templates' && template) {\n                return true;\n            }\n\n            // no match!\n            return false;\n        })\n            .map((site, i) => {\n                const {\n                    id,\n                    name,\n                    description,\n                    thumbnail,\n                    created_at,\n                    updated_at\n                } = site;\n                const size = objSize(site);\n                const _pages = site.pages ? site.pages : (opts.legacyPrefix ? site[`${opts.legacyPrefix}pages`] : []);\n                const pages = typeof _pages === 'string' ? JSON.parse(_pages) : _pages;\n                const time = updated_at ? ago(updated_at) : 'NA';\n                const createdAt = created_at ? ago(created_at) : 'NA';\n                const pageNames = pages.map(page => page.name).join(', ');\n                return `<div \n                    class=\"site-wrapper ${cs.currentId === id ? 'open' : ''}\" \n                    key=\"${i}\" \n                    data-id=\"${id}\" \n                    title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.open')}\">\n                        <div class=\"site-screenshot\">\n                            <img src=\"${thumbnail}\" alt=\"\" />\n                        </div>\n                        <div class=\"site-info\">\n                            <h2>\n                                ${name}\n                            </h2>\n                            <div class=\"site-meta\">\n                                ${description}\n                            </div>\n                        </div>\n                        <div class=\"site-update-time\">${time}</div>\n                        <div class=\"site-pages\">\n                            <div title=\"${pageNames || id}\">\n                                ${pages.length || 1}\n                            </div>\n                        </div>\n                        <div class=\"site-create-time\">${createdAt}</div>\n                        ${opts.size ? `<div class=\"site-size\" title=\"${size} KB\">\n                            ${size.toFixed(2)} KB\n                        </div>` : ''}\n                        <div class=\"site-actions\">\n                            <i class=\"${pfx}caret-icon fa fa-hand-pointer-o edit\" title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.edit')}\" data-id=\"${id}\"></i>\n                            ${!(cs.currentId === id) ? `<i class=\"${pfx}caret-icon fa fa-trash-o delete\" title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.delete')}\" data-id=\"${id}\"></i>` : ''}\n                        </div>\n                    </div>`;\n            }).join('\\n');\n\n        if (!matchingSites.length) {\n            if (tab === 'templates') return opts.nosites || '<div>No Templates Available.</div>';\n            matchingSites = `<div>\n                    <h3>\n                        No '${filterText}' examples found. Clear your search and try again.\n                    </h3>\n                </div>`;\n        }\n        return matchingSites;\n    }\n\n    renderSiteActions() {\n        const { editor } = this;\n\n        return this.state.tab === 'pages' ?\n            `<div  class=\"flex-row\">\n                <input \n                    class=\"search tm-input\" \n                    placeholder=\"${editor.I18n.t('grapesjs-project-manager.templates.search')}\"\n                />\n                <button id=\"open\" class=\"primary-button\">\n                    ${editor.I18n.t('grapesjs-project-manager.templates.open')}\n                </button>\n            </div>` :\n            `<div class=\"${this.pfx}tip-about ${this.pfx}four-color\">\n                ${editor.I18n.t('grapesjs-project-manager.templates.help')}\n            </div>\n            <div class=\"flex-row\">\n                <input \n                    class=\"name tm-input\" \n                    placeholder=\"${editor.I18n.t('grapesjs-project-manager.templates.new')}\"\n                />\n                <button id=\"create\" class=\"primary-button\">\n                    ${editor.I18n.t('grapesjs-project-manager.templates.create')}\n                </button>\n            </div>`;\n    }\n\n    renderThumbnail(thumbnail, page) {\n        const def = `<img src=\"${thumbnail}\" alt=\"\" />`;\n        if (thumbnail) return def;\n        else if (page.html) return `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"template-preview\" viewBox=\"0 0 1300 1100\" width=\"99%\" height=\"220\">\n                <foreignObject width=\"100%\" height=\"100%\" style=\"pointer-events:none\">\n                    <div xmlns=\"http://www.w3.org/1999/xhtml\">\n                        ${page.html + '<style scoped>' + page.css + '</style>'}\n                    </div>\n                </foreignObject>\n            </svg>`;\n        return def;\n    }\n\n    update() {\n        this.$el?.find('#site-list').html(this.renderSiteList());\n        this.$el?.find('#tm-actions').html(this.renderSiteActions());\n        const sites = this.$el?.find('.site-wrapper');\n        const search = this.$el?.find('input.search');\n        const name = this.$el?.find('input.name');\n        this.setStateSilent({ projectId: '' });\n        if (sites) {\n            sites.on('click', e => {\n                sites.removeClass('selected');\n                this.$(e.currentTarget).addClass('selected');\n                this.setStateSilent({ projectId: e.currentTarget.dataset.id });\n            });\n        }\n        if (search) {\n            search.val(this.state.filterText);\n            search.on('change', this.handleFilterInput);\n        }\n        if (name) {\n            name.val(this.state.nameText);\n            name.on('change', this.handleNameInput);\n        }\n        this.$el?.find('#open').on('click', this.handleOpen);\n        this.$el?.find('#create').on('click', this.handleCreate);\n        this.$el?.find('i.edit').on('click', this.openEdit);\n        this.$el?.find('i.delete').on('click', this.handleDelete);\n    }\n\n    render() {\n        const { $, pfx, opts, editor } = this;\n        const { tab } = this.state\n\n        // Do stuff on render\n        this.onRender();\n        this.$el?.remove();\n\n        /* Show admin UI */\n        const cont = $(`<div class=\"app\">\n                <div class=\"contents\">\n                    <div class=\"${pfx}tab\">\n                        <button id=\"pages\" class=\"${pfx}tablinks ${tab === 'pages' ? 'active' : ''}\">\n                            ${editor.I18n.t('grapesjs-project-manager.templates.all')}\n                        </button>\n                        <button id=\"templates\" class=\"${pfx}tablinks ${tab === 'templates' ? 'active' : ''}\"\">\n                            ${editor.I18n.t('grapesjs-project-manager.templates.templates')}\n                        </button>\n                    </div>\n                    <div id=\"tm-actions\">\n                        ${this.renderSiteActions()}\n                    </div>\n                    <div class=\"site-wrapper-header\">\n                        <div\n                            class=\"site-screenshot-header header\"\n                            data-sort=\"id\"\n                            title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.info')}\"\n                        >\n                            ${editor.I18n.t('grapesjs-project-manager.templates.info')}\n                        </div>\n                        <div\n                            class=\"site-info header\"\n                            data-sort=\"id\"\n                        ></div>\n                        <div\n                            class=\"site-update-time header\"\n                            data-sort=\"updated_at\"\n                            title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.updated')}\"\n                        >\n                            ${editor.I18n.t('grapesjs-project-manager.templates.updated')}\n                        </div>\n                        <div\n                            class=\"site-pages header\"\n                            data-sort=\"pages\"\n                            title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.pages')}\"\n                        >\n                            ${editor.I18n.t('grapesjs-project-manager.templates.pages')}\n                        </div>\n                        <div\n                            class=\"site-create-time header\"\n                            data-sort=\"created_at\"\n                            title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.created')}\"\n                        >\n                            ${editor.I18n.t('grapesjs-project-manager.templates.created')}\n                        </div>\n                        ${opts.size ? `<div\n                            class=\"site-size header\"\n                            data-sort=\"size\"\n                            title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.size')}\"\n                        >\n                            ${editor.I18n.t('grapesjs-project-manager.templates.size')}\n                        </div>` : ''}\n                        <div\n                            class=\"site-actions header\"\n                            data-sort=\"id\"\n                            title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.actions')}\"\n                        >\n                            ${editor.I18n.t('grapesjs-project-manager.templates.actions')}\n                        </div>\n                    </div>\n                    <div id=\"site-list\">\n                        ${this.renderSiteList()}\n                    </div>\n                </div>\n            </div>`);\n        cont.find('.header').on('click', this.handleSort);\n        cont.find('#pages, #templates').on('click', this.handleTabs);\n\n        this.$el = cont;\n        return cont;\n    }\n}","import UI from '../utils/ui';\n\nexport default class PagesApp extends UI {\n    constructor(editor, opts = {}) {\n        super(editor, opts);\n        this.addPage = this.addPage.bind(this);\n        this.selectPage = this.selectPage.bind(this);\n        this.removePage = this.removePage.bind(this);\n        this.isSelected = this.isSelected.bind(this);\n        this.handleNameInput = this.handleNameInput.bind(this);\n        this.openEdit = this.openEdit.bind(this);\n\n        /* Set initial app state */\n        this.state = {\n            editablePageId: '',\n            isShowing: true,\n            nameText: '',\n            pages: [],\n            loading: false\n        };\n    }\n\n    get editableId() {\n        return this.state.editablePageId;\n    }\n\n    onRender() {\n        const { pm, setState, editor } = this;\n        setState({\n            loading: true\n        });\n        setState({\n            pages: [...pm.getAll()]\n        });\n        editor.on('page', () => {\n            setState({\n                pages: [...pm.getAll()]\n            })\n        });\n        setState({\n            loading: false\n        });\n    }\n\n    isSelected(page) {\n        return this.pm.getSelected().id === page.id;\n    }\n\n    selectPage(e) {\n        this.pm.select(e.currentTarget.dataset.key);\n        this.update();\n    }\n\n    removePage(e) {\n        if (this.opts.confirmDeleteProject()) {\n            this.pm.remove(e.currentTarget.dataset.key);\n            this.update();\n        }\n    }\n\n    openEdit(e) {\n        const { editor } = this;\n        this.setStateSilent({\n            editablePageId: e.currentTarget.dataset.key\n        });\n        editor.Modal.close();\n        editor.SettingsApp.setTab('page');\n        editor.runCommand('open-settings');\n    }\n\n    editPage(id, name) {\n        const currentPage = this.pm.get(id);\n        currentPage?.set('name', name);\n        this.update()\n    }\n\n    addPage() {\n        const { pm } = this;\n        const { nameText } = this.state\n        if (!nameText) return;\n        pm.add({\n            name: nameText,\n            component: ''\n        });\n        this.update();\n    }\n\n    handleNameInput(e) {\n        this.setStateSilent({\n            nameText: e.target.value.trim()\n        })\n    }\n\n    renderPagesList() {\n        const { pages, loading } = this.state;\n        const { opts, isSelected } = this;\n\n        if (loading) return opts.loader || '<div>Loading pages...</div>';\n\n        return pages.map((page, i) => `<div \n                data-id=\"${i}\" \n                data-key=\"${page.get('private') ? '' : (page.id || page.get('name'))}\"  \n                class=\"page ${isSelected(page) ? 'selected' : ''}\"\n            >\n                <i class=\"fa fa-file-o\" style=\"margin:5px;\"></i>\n                ${page.get('name') || page.id}\n                ${isSelected(page) || page.get('internal') ? '' : `<span class=\"page-close\" data-key=\"${page.id || page.get('name')}\">&Cross;</span>`}\n                ${page.get('internal') ? '' : `<span class=\"page-edit\" data-key=\"${page.id || page.get('name')}\"><i class=\"fa fa-hand-pointer-o\"></i></span>`}\n            </div>`).join(\"\\n\");\n    }\n\n    update() {\n        this.$el?.find('.pages').html(this.renderPagesList());\n        this.$el?.find('.page').on('click', this.selectPage);\n        this.$el?.find('.page-edit').on('click', this.openEdit);\n        this.$el?.find('.page-close').on('click', this.removePage);\n    }\n\n    render() {\n        const { $, editor } = this;\n\n        // Do stuff on render\n        this.onRender();\n        this.$el?.remove();\n\n        const cont = $(`<div style=\"display: ${this.state.isShowing ? 'flex' : 'none'};\" class=\"pages-wrp\">\n                <div class=\"pages\">\n                    ${this.renderPagesList()}\n                </div>\n                <div  class=\"flex-row\">\n                    <input \n                        class=\"tm-input sm\" \n                        type=\"text\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.pages.placeholder')}\" \n                    />\n                </div>\n                <div class=\"add-page\">\n                    ${editor.I18n.t('grapesjs-project-manager.pages.new')}\n                </div>\n            </div>`);\n        cont.find('.add-page').on('click', this.addPage);\n        cont.find('input').on('change', this.handleNameInput);\n\n        this.$el = cont;\n        return cont;\n    }\n\n    get findPanel() {\n        return this.editor.Panels.getPanel('views-container');\n    }\n\n    showPanel() {\n        this.state.isShowing = true;\n        this.findPanel?.set('appendContent', this.render()).trigger('change:appendContent');\n        this.update();\n    }\n\n    hidePanel() {\n        this.state.isShowing = false;\n        this.render();\n    }\n}","import UI from '../utils/ui';\n\nexport default class SettingsApp extends UI {\n    constructor(editor, opts = {}) {\n        super(editor, opts);\n        this.handleSave = this.handleSave.bind(this);\n        this.handleThumbnail = this.handleThumbnail.bind(this);\n        this.handleThumbnailInput = this.handleThumbnailInput.bind(this);\n\n        /* Set initial app state */\n        this.state = {\n            tab: 'page',\n            loading: false\n        };\n    }\n\n    setTab(tab) {\n        this.state.tab = tab;\n    }\n\n    update() {\n        const { $el } = this;\n        $el?.find('#settings').html(this.renderSettings());\n        $el?.find('#generate').on('click', this.handleThumbnail);\n        $el?.find('input#thumbnail').on('change', this.handleThumbnailInput);\n    }\n\n    onRender() {\n        const { setState } = this;\n        setState({\n            loading: true\n        });\n        //? Setup code here \n        setState({\n            loading: false\n        });\n    }\n\n    handleSave(e) {\n        const { $el, editor } = this;\n        const { tab } = this.state;\n        if (tab === 'page') {\n            const id = editor.PagesApp.editableId;\n            const name = $el?.find('input.name').val().trim();\n            id && editor.PagesApp.editPage(id, name);\n        } else {\n            const id = editor.TemplateManager.editableId;\n            const thumbnail = $el?.find('input.thumbnail').val().trim();\n            const name = $el?.find('input.name').val().trim();\n            const description = $el?.find('input.desc').val().trim();\n            const template = $el?.find('input.template').get(0).checked;\n            id && editor.TemplateManager.handleEdit({ id, thumbnail, name, description, template });\n        }\n        editor.Modal.close();\n    }\n\n    handleThumbnail(e) {\n        const { editor, $el, opts } = this;\n        editor.runCommand('take-screenshot', {\n            clb(dataUrl) {\n                $el?.find('img').attr('src', dataUrl);\n                opts.onThumbnail(dataUrl, $el?.find('input.thumbnail'));\n            }\n        })\n    }\n\n    handleThumbnailInput(e) {\n        this.$el?.find('img').attr('src', e.target.value.trim());\n    }\n\n    renderSettings() {\n        const { tab, loading } = this.state;\n        const { opts, pfx, pm, editor } = this;\n\n        if (loading) return opts.loader || '<div>Loading settings...</div>';\n\n        if (tab === 'page') {\n            const page = pm.get(editor.PagesApp.editableId);\n            const value = page?.get('name') || page?.id || '';\n            return `<label for=\"name\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.name')}\n                </label>\n                <div class=\"flex-row\">\n                    <input \n                        class=\"name tm-input\" \n                        value=\"${value}\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.name')}\"/>\n                </div>`\n        } else {\n            const clb = site => site.id === editor.TemplateManager.editableId;\n            const site = editor.TemplateManager.allSites.find(clb);\n            return `<div class=\"${pfx}tip-about ${pfx}four-color\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.help')}\n                </div>\n                <label for=\"thumbnail\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.thumbnail')}\n                </label>\n                <div class=\"flex-row\">\n                    <input \n                        id=\"thumbnail\" \n                        class=\"thumbnail tm-input\" \n                        value=\"${site?.thumbnail || ''}\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.thumbnail')}\"\n                    />\n                </div>\n                <div class=\"flex-row\" style=\"margin-bottom:15px;\">\n                    <div class=\"site-screenshot\">\n                        <img src=\"${site?.thumbnail || ''}\" alt=\"screenshot\" />\n                    </div>\n                    <button id=\"generate\" class=\"primary-button\">\n                        ${editor.I18n.t('grapesjs-project-manager.settings.generate')}\n                    </button>\n                </div>\n                <label for=\"name\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.name')}\n                </label>\n                <div class=\"flex-row\">\n                    <input \n                        id=\"name\" \n                        class=\"name tm-input\" \n                        value=\"${site?.name || ''}\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.name')}\"\n                    />\n                </div>\n                <label for=\"desc\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.description')}\n                </label>\n                <div class=\"flex-row\">\n                    <input \n                        id=\"desc\" \n                        class=\"desc tm-input\" \n                        value=\"${site?.description || ''}\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.description')}\"\n                    />\n                </div>\n                <div class=\"flex-row group\">\n                    <input id=\"template\" class=\"template\" type=\"checkbox\" ${site?.template ? 'checked' : ''}/>\n                    <label for=\"template\">\n                        ${editor.I18n.t('grapesjs-project-manager.settings.labels.template')}\n                    </label>\n                </div>`\n        }\n    }\n\n    render() {\n        const { $, editor } = this;\n\n        // Do stuff on render\n        this.onRender();\n        this.$el?.remove();\n\n        const cont = $(`<div class=\"app\">\n                <div id=\"settings\">\n                    ${this.renderSettings()}\n                </div>\n                <div class=\"flex-row\">\n                    <button id=\"save\" class=\"primary-button\">\n                        ${editor.I18n.t('grapesjs-project-manager.settings.save')}\n                    </button>\n                </div>\n            </div>`);\n        cont.find('#save').on('click', this.handleSave);\n        cont.find('#generate').on('click', this.handleThumbnail);\n        cont.find('input#thumbnail').on('change', this.handleThumbnailInput);\n\n        this.$el = cont;\n        return cont;\n    }\n}","import TemplateManager from \"./templates\";\nimport PagesApp from \"./pages\";\nimport SettingsApp from \"./settings\";\n\nexport default TemplateManager;\nexport { TemplateManager, PagesApp, SettingsApp };","import domtoimage from 'dom-to-image';\n\nexport default (editor, opts = {}) => {\n    const cm = editor.Commands;\n    const cs = editor.Storage.getCurrentStorage();\n    const mdl = editor.Modal;\n    const pfx = editor.getConfig('stylePrefix');\n    const mdlClass = `${pfx}mdl-dialog-tml`;\n    const mdlClassMd = `${pfx}mdl-dialog-md`;\n\n    editor.domtoimage = domtoimage;\n\n    cm.add('open-templates', {\n        run(editor, sender) {\n            const mdlDialog = document.querySelector(`.${pfx}mdl-dialog`);\n            mdlDialog.classList.add(mdlClass);\n            sender?.set && sender.set('active');\n            mdl.setTitle(opts.mdlTitle);\n            mdl.setContent(editor.TemplateManager.render());\n            mdl.open();\n            mdl.getModel().once('change:open', () => {\n                mdlDialog.classList.remove(mdlClass);\n            });\n        }\n    });\n\n    cm.add('open-settings', {\n        run(editor, sender) {\n            const mdlDialog = document.querySelector(`.${pfx}mdl-dialog`);\n            mdlDialog.classList.add(mdlClassMd);\n            sender?.set && sender.set('active');\n            mdl.setTitle(opts.mdlTitle);\n            mdl.setContent(editor.SettingsApp.render());\n            mdl.open();\n            mdl.getModel().once('change:open', () => {\n                mdlDialog.classList.remove(mdlClassMd);\n            });\n        }\n    });\n\n    cm.add('open-pages', {\n        run(editor) {\n            console.log(\"editor: \", editor)\n            editor.PagesApp.showPanel();\n        },\n        stop(editor) {\n            editor.PagesApp.hidePanel();\n        }\n    })\n\n    //some magic from gist.github.com/jed/982883\n    const uuidv4 = () => ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    );\n\n    const getJpeg = async (node, options = {}, clb, clbErr) => {\n        try {\n            const dataUrl = await opts.onScreenshotAsync(domtoimage.toJpeg(node, options));\n            clb && clb(dataUrl);\n        } catch (err) {\n            clbErr && clbErr(err)\n        }\n    };\n\n    cm.add('get-uuidv4', () => {\n        if (crypto) {\n            return crypto.randomUUID ? crypto.randomUUID() : uuidv4();\n        }\n    });\n\n    cm.add('take-screenshot', (editor, s, options = { clb(d) { return d } }) => {\n        const el = editor.getWrapper().getEl();\n        getJpeg(el, {\n            quality: opts.quality,\n            height: 1000,\n            'cacheBust': true,\n            style: {\n                'background-color': 'white',\n                ...editor.getWrapper().getStyle()\n            },\n        }, options.clb, opts.onScreenshotError);\n    });\n\n    cm.add('save-as-template', editor => {\n        cs.setIsTemplate(true);\n        editor.store();\n    });\n\n    cm.add('delete-template', async (editor) => {\n        const res = await cs.delete();\n        opts.onDelete(res);\n    });\n}","export const storageIDB = 'indexeddb',\n    storageRemote = 'rest-api',\n    storageFireStore = 'firestore',\n    helpers = {\n        currentName: 'Default',\n        currentId: 'uuidv4',\n        currentThumbnail: '',\n        isTemplate: false,\n        description: 'No description',\n\n        setId(id) {\n            this.currentId = id;\n        },\n\n        setName(name) {\n            this.currentName = name;\n        },\n\n        setThumbnail(thumbnail) {\n            this.currentThumbnail = thumbnail;\n        },\n\n        setIsTemplate(isTemplate) {\n            this.isTemplate = !!isTemplate;\n        },\n\n        setDescription(description) {\n            this.description = description;\n        },\n    };","import { storageIDB, helpers } from '../consts';\n\nexport default (editor, opts = {}) => {\n    let db;\n    const sm = editor.StorageManager;\n    const storageName = storageIDB;\n    const objsName = opts.objectStoreName;\n\n    // Functions for DB retrieving\n    const getDb = () => db;\n    const getAsyncDb = () => new Promise((resolve, reject) => {\n        if (db) {\n            resolve(db);\n        } else {\n            const indexedDB = window.indexedDB || window.mozIndexedDB ||\n                window.webkitIndexedDB || window.msIndexedDB;\n            const request = indexedDB.open(opts.dbName, opts.indexeddbVersion);\n            request.onerror = reject;\n            request.onsuccess = () => {\n                db = request.result;\n                db.onerror = reject;\n                resolve(db);\n            };\n            request.onupgradeneeded = e => {\n                const objs = request.result.createObjectStore(objsName, { keyPath: 'id' });\n                objs.createIndex('name', 'name', { unique: false });\n            };\n        }\n    });\n\n    // Functions for object store retrieving\n    const getObjectStore = () => {\n        return db.transaction([objsName], 'readwrite').objectStore(objsName);\n    };\n    const getAsyncObjectStore = async () => {\n        if (db) {\n            return getObjectStore();\n        } else {\n            await getAsyncDb();\n            return getObjectStore();\n        }\n    };\n\n    // Add custom storage to the editor\n    sm.add(storageName, {\n        ...helpers,\n        getDb,\n\n        getObjectStore,\n\n        async load(keys) {\n            const objs = await getAsyncObjectStore();\n            return new Promise(\n                (resolve, reject) => {\n                    const request = objs.get(this.currentId);\n                    request.onerror = reject;\n                    request.onsuccess = () => {\n                        resolve(request.result || {});\n                    };\n                }\n            );\n        },\n\n        async loadAll() {\n            const objs = await getAsyncObjectStore();\n            return new Promise(\n                (resolve, reject) => {\n                    const request = objs.getAll();\n                    request.onerror = reject;\n                    request.onsuccess = () => {\n                        resolve(request.result || []);\n                    };\n                }\n            );\n        },\n\n        async store(data) {\n            const objs = await getAsyncObjectStore();\n            return new Promise(\n                (resolve, reject) => {\n                    const request = objs.put({\n                        id: this.currentId,\n                        name: this.currentName,\n                        template: this.isTemplate,\n                        thumbnail: this.currentThumbnail,\n                        description: this.description,\n                        updated_at: Date.now(),\n                        ...data\n                    });\n                    request.onerror = reject;\n                    request.onsuccess = () => {\n                        resolve(request.result);\n                    };\n                }\n            );\n        },\n\n        async update(data) {\n            const { id, ..._data } = data;\n            const objs = await getAsyncObjectStore();\n            return new Promise(\n                (resolve, reject) => {\n                    const request = objs.get(id);\n                    request.onerror = reject;\n                    request.onsuccess = () => {\n                        objs.put({ id, ...request.result, ..._data });\n                        resolve(request.result);\n                    };\n                }\n            );\n        },\n\n        async delete(index) {\n            const objs = await getAsyncObjectStore();\n            return new Promise(\n                (resolve, reject) => {\n                    const request = objs.delete(index || this.currentId);\n                    request.onerror = reject;\n                    request.onsuccess = () => {\n                        resolve(request.result);\n                    };;\n                }\n            );\n        }\n    });\n}","import { storageRemote, helpers } from '../consts';\n\nexport default (editor, opts = {}) => {\n    const sm = editor.StorageManager;\n    const storageName = storageRemote;\n    const remote = sm.get('remote');\n    const stOpts = sm.getStorageOptions('remote');\n\n    // Add custom storage to the editor\n    sm.add(storageName, {\n        ...helpers,\n\n        async load(keys = {}) {\n            const { urlLoad } = stOpts;\n            const id = urlLoad.endsWith('/') ? this.currentId : `/${this.currentId}`;\n            const projectData = await remote.load({\n                ...stOpts,\n                ...{ urlLoad: urlLoad + id },\n                ...keys\n            });\n            return projectData;\n        },\n\n        async loadAll(keys = {}) {\n            return await remote.load({ ...stOpts, ...keys });\n        },\n\n        async store(data, keys = {}) {\n            const { urlStore } = stOpts;\n            const id = urlStore.endsWith('/') ? this.currentId : `/${this.currentId}`;\n            const projectData = await remote.store({\n                id: this.currentId,\n                name: this.currentName,\n                template: this.isTemplate,\n                thumbnail: this.currentThumbnail,\n                description: this.description,\n                updated_at: Date.now(),\n                ...data\n            }, {\n                ...stOpts,\n                ...{ urlStore: opts.uuidInPath ? urlStore + id : urlStore },\n                ...keys\n            });\n            return projectData;\n        },\n\n        async update(data, keys = {}) {\n            const { urlStore } = stOpts;\n            let { id } = data;\n            id = urlStore.endsWith('/') ? id : `/${id}`;\n            const projectData = await remote.store(data, {\n                ...stOpts,\n                ...{ urlStore: urlStore + id },\n                ...keys\n            });\n            return projectData;\n        },\n\n        async delete(index, keys = {}) {\n            const { urlDelete } = stOpts;\n            let id = index || this.currentId;\n            id = urlDelete.endsWith('/') ? id : `/${id}`;\n            const res = await remote.request(urlDelete + id, { method: 'delete', ...keys });\n            return res;\n        }\n    });\n}","import { storageFireStore, helpers } from '../consts';\n\nexport default (editor, opts = {}) => {\n    const sm = editor.StorageManager;\n    const storageName = storageFireStore;\n\n    let db;\n    let doc;\n    let collection;\n    const { apiKey, authDomain, projectId } = opts;\n    const dbSettings = opts.settings;\n    const onError = err => sm.onError(storageName, err.code || err);\n\n    const getDoc = () => doc;\n\n    const getAsyncCollection = () => {\n        if (collection) return collection;\n        if (!firebase.apps.length) {\n            firebase.initializeApp({ apiKey, authDomain, projectId, ...opts.firebaseConfig });\n            db = firebase.firestore();\n            db.settings(dbSettings);\n        }\n        else {\n            firebase.app();\n            db = firebase.firestore();\n            db.settings(dbSettings);\n        }\n\n        if (opts.enableOffline) {\n            db.enablePersistence().catch(onError);\n        }\n\n        collection = db.collection(opts.objectStoreName);\n        return collection;\n    };\n\n    const getAsyncDoc = () => {\n        const cll = getAsyncCollection();\n        const cs = editor.Storage.getCurrentStorage();\n        doc = cll.doc(cs.currentId);\n        return doc;\n    };\n\n    sm.add(storageName, {\n        ...helpers,\n        getDoc,\n\n        setDocId(id) {\n            this.currentId = id;\n        },\n\n        async load(keys) {\n            const _doc = getAsyncDoc();\n            const doc = await _doc.get();\n            return doc.exists ? doc.data() : {};\n        },\n\n        async loadAll() {\n            const cll = getAsyncCollection();\n            const docs = await cll.get();\n            const data = [];\n            docs.forEach(doc => data.push(doc.data()));\n            return data;\n        },\n\n        async store(data) {\n            const cll = getAsyncCollection();\n            await cll.doc(data.id || this.currentId).set({\n                id: this.currentId,\n                name: this.currentName,\n                template: this.isTemplate,\n                thumbnail: this.currentThumbnail,\n                description: this.description,\n                updated_at: Date.now(),\n                ...data\n            });\n        },\n\n        async update(data) {\n            const { id, ..._data } = data;\n            const cll = getAsyncCollection();\n            await cll.doc(id).set(_data, { merge: true });\n        },\n\n        async delete(index) {\n            if (!index) {\n                const _doc = getAsyncDoc();\n                await _doc.delete();\n            } else {\n                const cll = getAsyncCollection();\n                await cll.doc(index).delete();\n            }\n        }\n    });\n}","import indexeddb from './indexeddb';\nimport remote from './remote';\nimport firestore from './firestore';\n\nexport default (editor, opts = {}) => {\n    // Load indexeddb storage\n    indexeddb(editor, opts);\n\n    // Load remote storage\n    remote(editor, opts);\n\n    // Load firestore storage\n    firestore(editor, opts);\n}","export default {\n    'grapesjs-project-manager': {\n        templates: {\n            all: 'All',\n            templates: 'Templates',\n            search: 'Search for sites by name or id',\n            open: 'Open',\n            new: 'Enter new page name',\n            create: 'Create',\n            help: 'Select a template, enter project name, then click create. If no template is selected a blank project will be created.',\n            info: 'Site Info',\n            updated: 'Last Updated',\n            pages: 'Pages',\n            created: 'Created At',\n            size: 'Size',\n            actions: 'Actions',\n            titles: {\n                open: 'Select to open site',\n                info: 'Click to sort by site name',\n                updated: 'Click to sort by last update date',\n                pages: 'Click to sort by number of pages',\n                created: 'Click to sort by site creation date',\n                size: 'Click to sort by site size',\n                actions: 'Click to sort by site name',\n                delete: 'Delete',\n                edit: 'Edit',\n            }\n        },\n        pages: {\n            placeholder: 'page name',\n            new: 'New Page +',\n        },\n        settings: {\n            save: 'Save',\n            generate: 'Generate',\n            help: 'Enter url, or generate thumbnail.',\n            labels: {\n                name: 'Name',\n                thumbnail: 'Thumbnail',\n                description: 'Description',\n                template: 'Template'\n            },\n            placeholders: {\n                name: 'Name...',\n                thumbnail: 'Thumbnail...',\n                description: 'Description...',\n            },\n        },\n    }\n}","import TemplateManager, { PagesApp, SettingsApp } from './manager';\nimport commands from './commands';\nimport storage from './storage';\nimport en from './locale/en';\n\nexport default (editor, opts = {}) => {\n    const options = {\n        ...{\n            // default options\n            // Allow migration of projects using deprecated storage prefix\n            legacyPrefix: '',\n            // Database name\n            dbName: 'gjs',\n\n            // Collection name\n            objectStoreName: 'projects',\n\n            // Load first template in storage\n            loadFirst: true,\n\n            // Custom load\n            customLoad: false,\n\n            // Add uuid as path parameter to store path for rest-api\n            uuidInPath: true,\n\n            // Indexeddb version schema\n            indexeddbVersion: 6,\n\n            // Custom delete function\n            delete: false,\n\n            // Confirm delete project\n            confirmDeleteProject() {\n                return confirm('Are you sure to delete this project')\n            },\n\n            // Confirm delete page\n            confirmDeletePage() {\n                return confirm('Are you sure to delete this page')\n            },\n\n            // When template or page is deleted\n            onDelete(res) {\n                console.log('Deleted:', res)\n            },\n\n            // Handle promise from delete\n            onDeleteAsync(del) {\n                return del;\n            },\n\n            // Custom update function\n            update: false,\n\n            // Handle promise from update\n            onUpdateAsync(up) {\n                return up;\n            },\n\n            // Handle promise from screenshot\n            onScreenshotAsync(shot) {\n                return shot;\n            },\n\n            // On screenshot error\n            onScreenshotError(err) {\n                console.log(err)\n            },\n\n            // Handle built-in thumbnail generation\n            // By default it just sets the url as the base64 encoded image which may be too large to store in a database\n            // You might want to upload this somewhere\n            onThumbnail(dataUrl, $input) {\n                $input.val(dataUrl);\n            },\n\n            // Quality of screenshot image from 0 to 1, more quality increases the image size\n            quality: .01,\n\n            // Content for templates modal title\n            mdlTitle: 'Project Manager',\n\n            // Show when no pages yet pages\n            nopages: '<div style=\"display:flex;align-items:center;padding:50px;margin:auto;\">No Projects Yet</div>',\n\n            // Firebase API key\n            apiKey: '',\n\n            // Firebase Auth domain\n            authDomain: '',\n\n            // Cloud Firestore project ID\n            projectId: '',\n\n            // Enable support for offline data persistence\n            enableOffline: true,\n\n            // Firebase app config\n            firebaseConfig: {},\n\n            // Database settings (https://firebase.google.com/docs/reference/js/firebase.firestore.Settings)\n            settings: { timestampsInSnapshots: true },\n\n            // Show estimated project statistics\n            size: false,\n\n            // Send feedback when open is clicked on current page\n            currentPageOpen() {\n                console.log('Current page already open')\n            },\n\n            i18n: {},\n        },\n        ...opts,\n    };\n\n    editor.I18n.addMessages({\n        en,\n        ...options.i18n,\n    });\n\n    // Init and add dashboard object to editor\n    editor.TemplateManager = new TemplateManager(editor, options);\n    editor.PagesApp = new PagesApp(editor, options);\n    editor.SettingsApp = new SettingsApp(editor, options);\n\n    // Load commands\n    commands(editor, options);\n\n    // Load storages\n    storage(editor, options);\n\n    // Load page with index zero\n    editor.on('load', async () => {\n        const cs = editor.Storage.getCurrentStorage();\n        const { customLoad } = options;\n        customLoad && typeof customLoad === 'function' && customLoad(editor, cs);\n        if (!customLoad) {\n            const res = await cs.loadAll();\n            const firstPage = res[0];\n            if (firstPage && options.loadFirst) {\n                cs.setId(firstPage.id);\n                cs.setName(firstPage.name);\n                cs.setThumbnail(firstPage.thumbnail);\n                cs.setIsTemplate(firstPage.template);\n                await editor.load();\n                editor.stopCommand('sw-visibility');\n                editor.runCommand('sw-visibility');\n            } else {\n                cs.setId(editor.runCommand('get-uuidv4'));\n                cs.setName(`Default-${cs.currentId.substr(0, 7)}`);\n            }\n        }\n    });\n};"],"sourceRoot":""}